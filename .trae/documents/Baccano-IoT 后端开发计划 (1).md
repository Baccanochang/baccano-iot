# Baccano-IoT 后端开发计划

## 1. 已完成工作

已完成项目基础架构搭建，包括：
- 创建了父POM文件，定义项目的基本信息和依赖管理
- 创建了common模块：
  - common-core：核心公共组件（基础实体类、统一响应格式、全局异常处理、自定义业务异常）
  - common-utils：工具类（日期工具、字符串工具）
  - common-mybatis：MyBatis扩展模块（MyBatis Plus配置）
- 创建了api-gateway模块的POM文件
- 创建了auth-service模块的POM文件

## 2. 后续开发计划

### 2.1 认证授权服务（auth-service）
- 实现用户认证与授权
- 实现JWT生成与验证
- 实现设备认证
- 实现RBAC权限管理

### 2.2 API网关服务（api-gateway）
- 实现请求路由与负载均衡
- 实现认证授权拦截
- 实现限流熔断

### 2.3 设备管理服务（device-manager）
- 实现设备注册与管理
- 实现物模型管理
- 实现设备配置管理

### 2.4 设备连接服务（device-connect）
- 实现MQTT协议支持
- 实现CoAP协议支持
- 实现HTTP协议支持
- 实现设备会话管理
- 实现心跳检测机制

### 2.5 规则引擎服务（rule-engine）
- 实现规则定义与管理
- 实现规则执行引擎
- 实现规则节点库
- 实现可视化规则链设计

### 2.6 告警中心服务（alert-center）
- 实现告警生成与管理
- 实现告警通知机制
- 实现告警历史记录
- 实现告警统计分析

### 2.7 资产管理服务（asset-manager）
- 实现资产树管理
- 实现设备与资产关联
- 实现资产属性管理
- 实现资产地理位置管理

### 2.8 协议适配服务（protocol-adapter）
- 实现Modbus协议支持
- 实现OPC UA协议支持

## 3. 开发顺序

1. 优先完成auth-service和api-gateway，确保系统的认证授权机制可用
2. 然后开发device-manager和device-connect，实现设备的基本管理和连接功能
3. 接着开发rule-engine和alert-center，实现规则处理和告警功能
4. 最后开发asset-manager和protocol-adapter，实现资产管理和工业协议支持

## 4. 技术栈

- 开发语言：Java 17+
- 核心框架：SpringBoot 4.0
- 微服务框架：SpringCloud Alibaba 2023.x
- 服务注册与配置：Nacos 2.3+
- RPC框架：Dubbo 3.3+
- ORM框架：MyBatis Plus 3.5.x
- 消息队列：RocketMQ 5.2+
- 时序数据库：TDengine 3.2+
- 关系型数据库：PostgreSQL 16+
- 缓存数据库：Redis 7.2+

## 5. 开发规范

- 代码规范：遵循Java编码规范
- 命名规范：采用驼峰命名法
- 注释规范：关键代码必须添加注释
- 测试规范：每个服务必须编写单元测试
- 文档规范：每个服务必须提供API文档

## 6. 里程碑计划

| 阶段 | 时间 | 成果 |
|------|------|------|
| 1. 项目初始化 | 已完成 | 基础架构搭建 |
| 2. 认证授权服务 | 2周 | 完成auth-service开发 |
| 3. API网关服务 | 1周 | 完成api-gateway开发 |
| 4. 设备管理服务 | 2周 | 完成device-manager开发 |
| 5. 设备连接服务 | 2周 | 完成device-connect开发 |
| 6. 规则引擎服务 | 2周 | 完成rule-engine开发 |
| 7. 告警中心服务 | 2周 | 完成alert-center开发 |
| 8. 资产管理服务 | 2周 | 完成asset-manager开发 |
| 9. 协议适配服务 | 2周 | 完成protocol-adapter开发 |
| 10. 系统集成测试 | 2周 | 完成系统集成测试 |
| 11. 性能优化与调优 | 1周 | 完成性能优化 |
| 12. 文档完善 | 1周 | 完成文档编写 |
| 13. 项目交付 | 1周 | 项目交付 |

## 7. 风险与挑战

### 7.1 技术风险
- 服务依赖风险：微服务之间存在复杂的依赖关系，某个服务故障可能影响整个系统
- 数据一致性风险：分布式系统中数据一致性难以保证，需要采用最终一致性设计
- 性能瓶颈风险：海量设备接入可能导致系统性能瓶颈
- 安全性风险：物联网设备数量庞大，安全管理难度大

### 7.2 应对措施
- 服务降级与熔断：采用Spring Cloud Gateway的限流熔断机制
- 数据一致性：采用最终一致性设计，结合消息队列实现数据同步
- 性能优化：采用缓存、异步处理、限流等方式优化性能
- 安全设计：实现RBAC权限管理、JWT认证、设备认证等多层次安全机制

## 8. 预期成果

- 完成Baccano-IoT物联网平台后端开发
- 实现设备认证授权、API网关、规则引擎、设备连接、规则引擎、告警中心等核心功能
- 构建高可用、高扩展性的物联网后端系统

## 9. 后续开发计划

### 9.1 认证授权服务（auth-service）
- 用户认证与授权
- JWT生成与验证
- 设备认证
- RBAC权限管理

### 9.2 API网关服务（api-gateway）
- 请求路由与负载均衡
- 认证授权拦截
- 限流熔断

### 9.3 设备管理服务（device-manager）
- 设备注册与管理
- 物模型管理
- 设备配置管理

### 9.4 设备连接服务（device-connect）
- MQTT协议支持
- CoAP协议支持
- HTTP协议支持
- 设备会话管理
- 心跳检测

### 9.5 规则引擎服务（rule-engine）
- 规则定义与管理
- 规则执行引擎
- 规则节点库
- 可视化规则链设计

### 9.6 告警中心服务（alert-center）
- 告警生成与管理
- 告警通知机制
- 告警历史记录
- 告警统计分析

### 9.7 资产管理服务（asset-manager）
- 资产树管理
- 设备与资产关联
- 资产属性管理
- 资产地理位置管理

### 9.8 协议适配服务（protocol-adapter）
- Modbus协议支持
- OPC UA协议支持